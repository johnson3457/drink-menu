<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>飲料菜單</title>
    <style>
        .body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #fff;
        }

        /* 頁面容器 */
        .menu-container {
            max-width: 1300px; /* 最大寬度 */
            margin: 0 auto;
        }

        /* 標題樣式 */
        .menu-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .menu-header h1 {
            font-size: 24px;
            font-weight: bold;
            color: #b8925d; /* 金色標題 */
        }

        /* 分類容器 */
        .menu-section {
            display: grid;
            grid-template-columns: repeat(3, 1fr); /* 三等分的佈局 */
            gap: 30px; /* 分類之間的間距 */
        }

        /* 每個分類 */
        .menu-category {
            padding: 10px;
        }

        .price-header {
            display: grid;
            grid-template-columns: 4fr 1fr 1fr; /* 分成三欄：名稱、M、L */
            font-size: 18px;
            color: #b8925d;
            margin-bottom: 10px;
            margin-top:10px;
            text-align: center;
            align-items: center;
        }

        .category-name {
            font-size: 18px;
            font-weight: bold;
            text-align: left;
            display: inline-flex;
            align-items: center;
        }

        .item-size{
            font-size: 18px;
            font-weight: bold;
        }

        /* 每個菜單項目 */
        .menu-item {
            display: grid;
            grid-template-columns: 4fr 1fr 1fr; /* 名稱、M價格、L價格 */
            padding: 5px 0;
            align-items: center;
        }

        .item-name {
            font-size: 16px;
            display: flex;
            align-items: center;
        }

        .item-price {
            font-size: 16px;
            color: #3c2f23;
            text-align: center;
        }

        .logo {
            position: absolute;
            top: 27px;
            left: 350px;
            width: 50px;
            height: auto;
        }
        .hot {
            width: 16px;
            height: 16px;
            margin-left: 4px;
            background-color:#b8925d;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            text-align: center;
        }

        .hot::before {
            content: "H"; /* 嵌入文字 */
            position: absolute;
            color: white;
            font-size: 12px;
            font-weight: bold;
            text-align: center;
        }
        .small-text{
            font-size:12px;
            vertical-align: text-bottom;
            color:#b8925d;
            margin: 0;
            padding: 0;
        }
        .small-text2{
            font-size:12px;
            vertical-align: text-bottom;
            color:#b8925d;
            margin: 0;
            padding: 0;

        }
        .can-hot{
            margin-top: 0px;
            margin-left:1000px;
            font-size: 18px;
            font-weight: bold;
            text-align: left;
            display: inline-flex;
            align-items: center;

        }     
    </style>
</head>
<body>
    <div class="menu-container">
        <header class="menu-header">
            <h1>WHITE ALLEY&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;飲品全面&nbsp;&nbsp;來店買5送1、外送買10送1</h1>
            <img src="unnamed.jpg"  class="logo">
            <div class="can-hot"><div class="hot"></div>可調製熱飲</div>  
        </header>
        
        <div class="menu-section">
            <!-- 左-->
            <div class="menu-category">
                <div class="price-header">
                    <span class="category-name">好茶系列</span>
                    <span class="item-size">M</span>
                    <span class="item-size">L</span>
                </div>
                <div class="menu-item">
                    <span class="item-name">茉香綠茶<div class="hot"></div></span>
                    <span class="item-price">25</span>
                    <span class="item-price">30</span>
                </div>
                <div class="menu-item">
                    <span class="item-name">春芽綠茶<div class="hot"></div></span>
                    <span class="item-price">25</span>
                    <span class="item-price">30</span>
                </div>
                <div class="menu-item">
                    <span class="item-name">四季春青茶<div class="hot"></div></span>
                    <span class="item-price">25</span>
                    <span class="item-price">30</span>
                </div>
                <div class="menu-item">
                    <span class="item-name">手採金萱烏龍<div class="hot"></div></span>
                    <span class="item-price">25</span>
                    <span class="item-price">30</span>
                </div>
                <div class="menu-item">
                    <span class="item-name">古早味冬瓜茶（熬煮）</span>
                    <span class="item-price">25</span>
                    <span class="item-price">30</span>
                </div>
                <div class="menu-item">
                    <span class="item-name">冬瓜青茶</span>
                    <span class="item-price">30</span>
                    <span class="item-price">35</span>
                </div>
                <div class="menu-item">
                    <span class="item-name">梅之綠茶<div class="hot"></div></span>
                    <span class="item-price">30</span>
                    <span class="item-price">40</span>
                </div>
                <div class="menu-item">
                    <span class="item-name">冰淇淋紅茶</span>
                    <span class="item-price"></span>
                    <span class="item-price">55</span>
                </div>
                <div class="price-header">
                    <span class="category-name">芭菲系列</span>
                    <span class="item-size">M</span>
                    <span class="item-size"></span>
                </div>
                <div class="menu-item">
                    <span class="item-name">抹茶草莓芭菲<span class="small-text">(冬季限定12~3月)</span></span>
                    <span class="item-price">95</span>
                    <span class="item-price"></span>
                </div>
                <div class="menu-item">
                    <span class="item-name">抹茶芒果芭菲<span class="small-text">(季節限定6~9月)</span></span>
                    <span class="item-price">95</span>
                    <span class="item-price"></span>
                </div>
                <div class="price-header">
                    <span class="category-name">奶茶系列</span>
                    <span class="item-size">M</span>
                    <span class="item-size">L</span>
                </div>
                <div class="menu-item">
                    <span class="item-name">奶茶<div class="hot"></div></span>
                    <span class="item-price">35</span>
                    <span class="item-price">45</span>
                </div>
                <div class="menu-item">
                    <span class="item-name">奶綠<div class="hot"></div></span>
                    <span class="item-price">35</span>
                    <span class="item-price">45</span>
                </div>
                <div class="menu-item">
                    <span class="item-name">波霸奶茶/粉圓奶茶<div class="hot"></div></span>
                    <span class="item-price">40</span>
                    <span class="item-price">50</span>
                </div>
                <div class="menu-item">
                    <span class="item-name">波霸粉圓奶茶<div class="hot"></div></span>
                    <span class="item-price">40</span>
                    <span class="item-price">50</span>
                </div>
                <div class="menu-item">
                    <span class="item-name">阿華田<div class="hot"></div></span>
                    <span class="item-price">40</span>
                    <span class="item-price">50</span>
                </div>
                <div class="menu-item">
                    <span class="item-name">波霸阿華田<div class="hot"></div></span>
                    <span class="item-price">45</span>
                    <span class="item-price">55</span>
                </div>
                <div class="menu-item">
                    <span class="item-name">可可芭蕾<div class="hot"></div></span>
                    <span class="item-price">40</span>
                    <span class="item-price">50</span>
                </div>
                <div class="menu-item">
                    <span class="item-name">布丁奶茶<div class="hot"></div></span>
                    <span class="item-price">50</span>
                    <span class="item-price">60</span>
                </div>
                <div class="price-header">
                    <span class="category-name">黑糖熬煮系列</span>
                    <span class="item-size">M</span>
                    <span class="item-size"></span>
                </div>
                <div class="menu-item">
                    <span class="item-name">黑糖珍珠鮮奶<div class="hot"></div></span>
                    <span class="item-price">55</span>
                    <span class="item-price"></span>
                </div>
                <div class="menu-item">
                    <span class="item-name">芋見黑糖珍珠鮮奶<div class="hot"></div></span>
                    <span class="item-price">65</span>
                    <span class="item-price"></span>
                </div>
                <div class="menu-item">
                    <span class="item-name">黑糖珍珠可可芭蕾拿鐵<div class="hot"></div></span>
                    <span class="item-price">60</span>
                    <span class="item-price"></span>
                </div>
            </div>
            

            <!-- 中 -->
            <div class="menu-category">
                <div class="price-header">
                    <span class="category-name">鮮果系列</span>
                    <span class="item-size">L</span>
                    <span class="item-size"></span>
                </div>
                <div class="menu-item">
                    <span class="item-name">櫻桃可可<span class="small-text">(季節限定6~9月/12~2月)</span></span>
                    <span class="item-price">90</span>
                    <span class="item-price"></span>
                </div>
                <div class="menu-item">
                    <span class="item-name">楊枝甘露<span class="small-text">(季節限定6~9月)</span></span>
                    <span class="item-price">80</span>
                    <span class="item-price"></span>
                </div>
                <div class="menu-item">
                    <span class="item-name">滿杯水果茶</span>
                    <span class="item-price">65</span>
                    <span class="item-price"></span>
                </div>
                <div class="menu-item">
                    <span class="item-name">滿杯橙子</span>
                    <span class="item-price">65</span>
                    <span class="item-price"></span>
                </div>
                <div class="menu-item">
                    <span class="item-name">滿杯紅柚</span>
                    <span class="item-price">65</span>
                    <span class="item-price"></span>
                </div>
                <div class="menu-item">
                    <span class="item-name">一顆檸檬吧</span>
                    <span class="item-price">55</span>
                    <span class="item-price"></span>
                </div>
                <div class="menu-item">
                    <span class="item-name">檸檬四季春</span>
                    <span class="item-price">55</span>
                    <span class="item-price"></span>
                </div>
                <div class="menu-item">
                    <span class="item-name">港式凍檸茶</span>
                    <span class="item-price">55</span>
                    <span class="item-price"></span>
                </div>
                <div class="menu-item">
                    <span class="item-name">檸檬梅子</span>
                    <span class="item-price">55</span>
                    <span class="item-price"></span>
                </div>
                <div class="menu-item">
                    <span class="item-name">金桔檸檬</span>
                    <span class="item-price">55</span>
                    <span class="item-price"></span>
                </div>
                <div class="menu-item">
                    <span class="item-name">冬瓜檸檬</span>
                    <span class="item-price">55</span>
                    <span class="item-price"></span>
                </div>
                <div class="menu-item">
                    <span class="item-name">鮮桔青茶</span>
                    <span class="item-price">55</span>
                    <span class="item-price"></span>
                </div>
                <div class="menu-item">
                    <span class="item-name">甘蔗青茶</span>
                    <span class="item-price">60</span>
                    <span class="item-price"></span>
                </div>
                <div class="price-header">
                    <span class="category-name">養樂多系列</span>
                    <span class="item-size">L</span>
                    <span class="item-size"></span>
                </div>
                <div class="menu-item">
                    <span class="item-name">綠茶養樂多</span>
                    <span class="item-price">50</span>
                    <span class="item-price"></span>
                </div>
                <div class="menu-item">
                    <span class="item-name">橙子養樂多</span>
                    <span class="item-price">75</span>
                    <span class="item-price"></span>
                </div>
                <div class="menu-item">
                    <span class="item-name">紅柚養樂多</span>
                    <span class="item-price">75</span>
                    <span class="item-price"></span>
                </div>
                <div class="menu-item">
                    <span class="item-name">火龍果養樂多</span>
                    <span class="item-price">75</span>
                    <span class="item-price"></span>
                </div>
                <div class="price-header">
                    <span class="category-name">奶蓋系列</span>
                    <span class="item-size">M</span>
                    <span class="item-size">L</span>
                </div>
                <div class="menu-item">
                    <span class="item-name">啵啵黑糖奶蓋紅<div class="hot"></div></span>
                    <span class="item-price">45</span>
                    <span class="item-price">55</span>
                </div>
                <div class="menu-item">
                    <span class="item-name">靜岡抹茶奶蓋綠<div class="hot"></div></span>
                    <span class="item-price">45</span>
                    <span class="item-price">55</span>
                </div>
                <div class="menu-item">
                    <span class="item-name">奶蓋紅茶<div class="hot"></div></span>
                    <span class="item-price">40</span>
                    <span class="item-price">50</span>
                </div>
                <div class="menu-item">
                    <span class="item-name">奶蓋綠茶<div class="hot"></div></span>
                    <span class="item-price">40</span>
                    <span class="item-price">50</span>
                </div>
            </div>

            <!-- 右 -->
            <div class="menu-category">
                <div class="price-header">
                    <span class="category-name">芝士奶蓋系列</span>
                    <span class="item-size">M</span>
                    <span class="item-size">L</span>
                </div>
                <div class="menu-item">
                    <span class="item-name">芝士葡萄<span class="small-text">(季節限定10~2月)</span></span>
                    <span class="item-price"></span>
                    <span class="item-price">85</span>
                </div>
                <div class="menu-item">
                    <span class="item-name">芝士草莓<span class="small-text">(季節限定12~3月)</span></span>
                    <span class="item-price"></span>
                    <span class="item-price">75</span>
                </div>
                <div class="menu-item">
                    <span class="item-name">芝士鳳梨</span>
                    <span class="item-price"></span>
                    <span class="item-price">75</span>
                </div>
                <div class="menu-item">
                    <span class="item-name">芝士芒果<span class="small-text">(季節限定6~9月)</span></span>
                    <span class="item-price"></span>
                    <span class="item-price">75</span>
                </div>
                <div class="menu-item">
                    <span class="item-name">芝士火龍果</span>
                    <span class="item-price"></span>
                    <span class="item-price">75</span>
                </div>
                <div class="menu-item">
                    <span class="item-name">芝士奶蓋紅茶<div class="hot"></div></span>
                    <span class="item-price">40</span>
                    <span class="item-price">50</span>
                </div>
                <div class="menu-item">
                    <span class="item-name">芝士奶蓋綠茶<div class="hot"></div></span>
                    <span class="item-price">40</span>
                    <span class="item-price">50</span>
                </div>
                <div class="price-header">
                    <span class="category-name">鮮奶系列</span>
                    <span class="item-size">M</span>
                    <span class="item-size">L</span>
                </div>
                <div class="menu-item">
                    <span class="item-name">波霸/粉圓紅茶拿鐵<div class="hot"></div></span>
                    <span class="item-price">50</span>
                    <span class="item-price">60</span>
                </div>
                <div class="menu-item">
                    <span class="item-name">靜岡抹茶拿鐵<div class="hot"></div></span>
                    <span class="item-price"></span>
                    <span class="item-price">60</span>
                </div>
                <div class="menu-item">
                    <span class="item-name">冬瓜鮮奶</span>
                    <span class="item-price">45</span>
                    <span class="item-price">55</span>
                </div>
                <div class="menu-item">
                    <span class="item-name">紅茶拿鐵<div class="hot"></div></span>
                    <span class="item-price">45</span>
                    <span class="item-price">55</span>
                </div>
                <div class="menu-item">
                    <span class="item-name">綠茶拿鐵<div class="hot"></div></span>
                    <span class="item-price">45</span>
                    <span class="item-price">55</span>
                </div>
                <div class="menu-item">
                    <span class="item-name">阿華田拿鐵<div class="hot"></div></span>
                    <span class="item-price">50</span>
                    <span class="item-price">65</span>
                </div>
                <div class="menu-item">
                    <span class="item-name">可可芭蕾拿鐵<div class="hot"></div></span>
                    <span class="item-price">50</span>
                    <span class="item-price">65</span>
                </div>
                <div class="menu-item">
                    <span class="item-name">波霸阿華田拿鐵<div class="hot"></div></span>
                    <span class="item-price">55</span>
                    <span class="item-price">70</span>
                </div>
                <div class="menu-item">
                    <span class="item-name">芋頭鮮奶（熬煮）<div class="hot"></div></span>
                    <span class="item-price">60</span>
                    <span class="item-price"></span>
                </div>
                <div class="menu-item">
                    <span class="item-name">芋頭西米露<div class="hot"></div></span>
                    <span class="item-price">65</span>
                    <span class="item-price"></span>
                </div>
                <div class="price-header">
                    <span class="category-name">熱飲熬煮系列<span class="small-text2">(冬季限定12~2月)</span></span>
                    <span class="item-size">M</span>
                    <span class="item-size"></span>
                </div>
                <div class="menu-item">
                    <span class="item-name">芝麻鮮奶/花生鮮奶</span>
                    <span class="item-price">65</span>
                    <span class="item-price"></span>
                </div>
                <div class="menu-item">
                    <span class="item-name">黑糖薑茶</span>
                    <span class="item-price">50</span>
                    <span class="item-price"></span>
                </div>
                <div class="menu-item">
                    <span class="item-name">桂圓紅棗茶</span>
                    <span class="item-price">55</span>
                    <span class="item-price"></span>
                </div>
                <div class="menu-item">
                    <span class="item-name">薑汁桂圓</span>
                    <span class="item-price">55</span>
                    <span class="item-price"></span>
                </div>
                <div class="menu-item">
                    <span class="item-name">薑汁撞奶</span>
                    <span class="item-price">60</span>
                    <span class="item-price"></span>
                </div>

        </div>
    </div>
<!-- 在原本 </body> 標籤前加入以下內容 -->

<!-- 點餐視窗 -->
<div id="orderModal" style="display: none; position: fixed; top: 0; right: -400px; width: 400px; height: 100%; background-color: white; box-shadow: -2px 0 5px rgba(0,0,0,0.2); z-index: 1000; transition: right 0.3s ease-in-out;">
    <div style="padding: 20px; height: 100%; overflow-y: auto;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <h3 id="selectedDrinkName" style="margin: 0;"></h3>
            <button onclick="closeModal()" style="background: none; border: none; font-size: 20px; cursor: pointer; padding: 5px;">×</button>
        </div>
        <p id="selectedDrinkPrice"></p>
        
        <div style="margin: 10px 0;">
            <label>甜度：</label>
            <div class="sugar-options" style="margin-top: 5px;">
                <button onclick="selectSugar(this, '正常')" class="option-btn sugar-selected">正常</button>
                <button onclick="selectSugar(this, '少糖')" class="option-btn">少糖</button>
                <button onclick="selectSugar(this, '半糖')" class="option-btn">半糖</button>
                <button onclick="selectSugar(this, '微糖')" class="option-btn">微糖</button>
                <button onclick="selectSugar(this, '無糖')" class="option-btn">無糖</button>
            </div>
        </div>
        
        <div style="margin: 10px 0;">
            <label>冰塊：</label>
            <div class="ice-options" style="margin-top: 5px;">
                <button onclick="selectIce(this, '正常')" class="option-btn ice-selected">正常</button>
                <button onclick="selectIce(this, '少冰')" class="option-btn">少冰</button>
                <button onclick="selectIce(this, '半冰')" class="option-btn">半冰</button>
                <button onclick="selectIce(this, '微冰')" class="option-btn">微冰</button>
                <button onclick="selectIce(this, '去冰')" class="option-btn">去冰</button>
            </div>
        </div>

        <!-- 新增溫度選擇（預設隱藏） -->
        <div id="tempSelect" style="margin: 10px 0; display: none;">
            <label>溫度：</label>
            <div class="temp-options" style="margin-top: 5px;">
                <button onclick="selectTemp(this, '冷飲')" class="option-btn temp-selected">冷飲</button>
                <button onclick="selectTemp(this, '熱飲')" class="option-btn">熱飲</button>
            </div>
        </div>

        <!-- 新增杯型選擇（預設隱藏） -->
        <div id="sizeSelect" style="margin: 10px 0; display: none;">
            <label>杯型：</label>
            <div class="size-options" style="margin-top: 5px;">
                <button onclick="selectSize(this, 'M')" class="option-btn size-selected">M</button>
                <button onclick="selectSize(this, 'L')" class="option-btn">L</button>
            </div>
        </div>

        <!-- 新增數量選擇 -->
        <div style="margin: 10px 0;">
            <label>數量：</label>
            <input type="number" id="quantity" min="1" value="1" style="width: 60px;">
        </div>

        <!-- 新增備註欄位 -->
        <div style="margin: 10px 0;">
            <label>備註：</label>
            <input type="text" id="note" placeholder="如：加珍珠、加椰果" style="width: 200px; padding: 5px;">
        </div>

        <div style="position: sticky; bottom: 0; background: white; padding-top: 20px; border-top: 1px solid #ddd;">
            <button onclick="submitOrder()" style="width: 100%; background: #b8925d; color: white; border: none; padding: 10px; border-radius: 3px; cursor: pointer; margin-bottom: 10px;">確認</button>
            <button onclick="closeModal()" style="width: 100%; background: #f44336; color: white; border: none; padding: 10px; border-radius: 3px; cursor: pointer;">取消</button>
        </div>
    </div>
</div>

<!-- 訂單表格區域 -->
<div style="margin: 20px; padding: 20px; background: #fff; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
    <h2>訂單明細</h2>
    <table id="orderTable" style="width: 100%; border-collapse: collapse; margin-bottom: 20px;">
        <thead>
            <tr style="background: #f5f5f5; border-bottom: 2px solid #ddd;">
                <th style="padding: 10px; border-right: 1px solid #ddd;">飲料名稱</th>
                <th style="padding: 10px; border-right: 1px solid #ddd;">甜度</th>
                <th style="padding: 10px; border-right: 1px solid #ddd;">冰塊</th>
                <th style="padding: 10px; border-right: 1px solid #ddd;">數量</th>
                <th style="padding: 10px; border-right: 1px solid #ddd;">價格</th>
                <th style="padding: 10px; border-right: 1px solid #ddd;">備註</th>
                <th style="padding: 10px;"></th>
            </tr>
        </thead>
        <tbody>
            <!-- 訂單項目會動態插入這裡 -->
        </tbody>
        <tfoot>
            <tr style="border-top: 2px solid #ddd;">
                <td colspan="3" style="text-align: right; padding: 10px; border: none;">總計：</td>
                <td id="totalPrice" colspan="2" style="padding: 10px; border: none;">0 元</td>
            </tr>
        </tfoot>
    </table>
    <div style="display: flex; gap: 10px;">
        <button onclick="exportOrder()" style="background: #b8925d; color: white; border: none; padding: 10px 20px; border-radius: 3px; cursor: pointer;">確認訂單並匯出</button>
        <button onclick="clearAllOrders()" style="background: #f44336; color: white; border: none; padding: 10px 20px; border-radius: 3px; cursor: pointer;">全部清除</button>
    </div>
</div>

<script>
    // 為所有飲料名稱添加點擊事件和懸停效果的樣式
    document.querySelectorAll('.item-name').forEach(item => {
        item.style.cursor = 'pointer';
        item.style.transition = 'background-color 0.3s';
        
        // 懸停效果
        item.addEventListener('mouseover', function() {
            this.style.backgroundColor = '#f0f0f0';
        });
        
        item.addEventListener('mouseout', function() {
            if (!this.classList.contains('selected')) {
                this.style.backgroundColor = '';
            }
        });

        // 點擊事件
        item.addEventListener('click', function() {
            // 移除其他項目的選中狀態
            document.querySelectorAll('.item-name').forEach(i => {
                i.style.backgroundColor = '';
            });
            
            // 設置當前項目的選中狀態
            this.style.backgroundColor = '#e3f2fd';
            
            // 獲取飲料名稱和價格
            const name = this.textContent.split('(')[0].trim();
            const priceElements = this.closest('.menu-item').querySelectorAll('.item-price');
            let prices = [];
            priceElements.forEach(el => {
                if(el.textContent.trim()) {
                    prices.push(el.textContent);
                }
            });
            
            // 檢查是否有多個價格（表示有不同杯型）
            const hasSizeOptions = prices.length > 1;
            document.getElementById('sizeSelect').style.display = 'block';
            
            // 更新價格顯示
            if (hasSizeOptions) {
                document.getElementById('selectedDrinkPrice').textContent = 
                    `價格：M ${prices[0]} / L ${prices[1]} 元`;
                // 啟用所有杯型按鈕
                document.querySelectorAll('.size-options .option-btn').forEach(btn => {
                    btn.disabled = false;
                    btn.style.opacity = '1';
                    btn.style.cursor = 'pointer';
                });
            } else {
                document.getElementById('selectedDrinkPrice').textContent = 
                    `價格：${prices[0]} 元`;
                // 根據價格所在欄位決定預設選中的杯型
                const priceHeaders = this.closest('.menu-category').querySelector('.price-header .item-size');
                const defaultSize = priceHeaders.textContent.trim();
                
                // 設置預設杯型並禁用其他選項
                document.querySelectorAll('.size-options .option-btn').forEach(btn => {
                    if (btn.textContent === defaultSize) {
                        btn.classList.add('size-selected');
                        btn.disabled = false;
                        btn.style.opacity = '1';
                    } else {
                        btn.classList.remove('size-selected');
                        btn.disabled = true;
                        btn.style.opacity = '0.5';
                        btn.style.cursor = 'not-allowed';
                    }
                });
            }
            
            // 更新並顯示點餐視窗
            document.getElementById('selectedDrinkName').textContent = name;
            openModal();
            
            // 檢查是否有熱飲選項
            const hasHotOption = this.querySelector('.hot') !== null;
            document.getElementById('tempSelect').style.display = hasHotOption ? 'block' : 'none';
            
            // 如果不是熱飲選項，重置溫度選擇
            if (!hasHotOption) {
                document.querySelector('.temp-options .option-btn').classList.add('temp-selected');
            }
        });
    });

    // 修改開啟視窗的方式
    function openModal() {
        const modal = document.getElementById('orderModal');
        modal.style.display = 'block';
        // 使用 setTimeout 確保 display:block 後再設置位置
        setTimeout(() => {
            modal.style.right = '0';
        }, 10);
    }

    // 修改關閉視窗的方式
    function closeModal() {
        const modal = document.getElementById('orderModal');
        modal.style.right = '-400px';
        // 等待動畫完成後再隱藏
        setTimeout(() => {
            modal.style.display = 'none';
        }, 300);
    }

    // 添加選擇甜度的函數
    function selectSugar(btn, value) {
        // 移除其他按鈕的選中狀態
        document.querySelectorAll('.sugar-options .option-btn').forEach(b => {
            b.classList.remove('sugar-selected');
        });
        // 添加當前按鈕的選中狀態
        btn.classList.add('sugar-selected');
    }

    // 添加選擇冰塊的函數
    function selectIce(btn, value) {
        // 移除其他按鈕的選中狀態
        document.querySelectorAll('.ice-options .option-btn').forEach(b => {
            b.classList.remove('ice-selected');
        });
        // 添加當前按鈕的選中狀態
        btn.classList.add('ice-selected');
    }

    // 添加選擇溫度的函數
    function selectTemp(btn, value) {
        document.querySelectorAll('.temp-options .option-btn').forEach(b => {
            b.classList.remove('temp-selected');
        });
        btn.classList.add('temp-selected');
    }

    // 添加選擇杯型的函數
    function selectSize(btn, value) {
        document.querySelectorAll('.size-options .option-btn').forEach(b => {
            b.classList.remove('size-selected');
        });
        btn.classList.add('size-selected');
    }

    // 提交訂單
    function submitOrder() {
        const name = document.getElementById('selectedDrinkName').textContent;
        const sugarLevel = document.querySelector('.sugar-options .sugar-selected').textContent;
        const iceLevel = document.querySelector('.ice-options .ice-selected').textContent;
        const quantity = document.getElementById('quantity').value;
        const tempLevel = document.getElementById('tempSelect').style.display === 'block' ? 
            document.querySelector('.temp-options .temp-selected').textContent : '冷飲';
        const note = document.getElementById('note').value;
        
        // 處理杯型和價格
        const hasSizeOptions = document.getElementById('sizeSelect').style.display === 'block';
        const size = hasSizeOptions ? document.querySelector('.size-options .size-selected').textContent : '';
        const priceText = document.getElementById('selectedDrinkPrice').textContent;
        
        let unitPrice;
        if (hasSizeOptions) {
            const prices = priceText.match(/\d+/g);
            if (prices && prices.length >= 1) {
                if (prices.length === 1) {
                    // 只有一個價格時
                    unitPrice = parseInt(prices[0]);
                } else {
                    // 有兩個價格時，根據選擇的杯型決定
                    unitPrice = size === 'M' ? parseInt(prices[0]) : parseInt(prices[1]);
                }
            } else {
                alert('無法取得價格資訊！');
                return;
            }
        } else {
            const price = priceText.match(/\d+/);
            if (price) {
                unitPrice = parseInt(price[0]);
            } else {
                alert('無法取得價格資訊！');
                return;
            }
        }
        
        if (isNaN(unitPrice)) {
            alert('價格資訊有誤！');
            return;
        }
        
        const totalPrice = unitPrice * quantity;
        
        // 創建新的表格行
        const tbody = document.querySelector('#orderTable tbody');
        const newRow = tbody.insertRow();
        
        // 組合顯示名稱（包含大小和溫度）
        let displayName = name;
        if (hasSizeOptions) {
            displayName += `(${size})`;
        }
        if (tempLevel === '熱飲') {
            displayName += '(熱)';
        }
        
        newRow.innerHTML = `
            <td style="padding: 10px; border-right: 1px solid #ddd; border-bottom: 1px solid #ddd;">${displayName}</td>
            <td style="padding: 10px; border-right: 1px solid #ddd; border-bottom: 1px solid #ddd;">${sugarLevel}</td>
            <td style="padding: 10px; border-right: 1px solid #ddd; border-bottom: 1px solid #ddd;">${iceLevel}</td>
            <td style="padding: 10px; border-right: 1px solid #ddd; border-bottom: 1px solid #ddd;">${quantity}</td>
            <td style="padding: 10px; border-right: 1px solid #ddd; border-bottom: 1px solid #ddd;">${totalPrice}</td>
            <td style="padding: 10px; border-right: 1px solid #ddd; border-bottom: 1px solid #ddd;">${note}</td>
            <td style="padding: 10px; border-bottom: 1px solid #ddd;">
                <button onclick="deleteRow(this)" style="background: #f44336; color: white; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer;">刪除</button>
            </td>
        `;
        
        // 重置所有選項為預設值
        resetOrderForm();
        updateTotal();
        closeModal();
    }

    // 新增重置表單的函數
    function resetOrderForm() {
        // 重置甜度
        document.querySelectorAll('.sugar-options .option-btn').forEach(b => {
            b.classList.remove('sugar-selected');
        });
        document.querySelector('.sugar-options .option-btn').classList.add('sugar-selected');
        
        // 重置冰塊
        document.querySelectorAll('.ice-options .option-btn').forEach(b => {
            b.classList.remove('ice-selected');
        });
        document.querySelector('.ice-options .option-btn').classList.add('ice-selected');
        
        // 重置溫度選擇
        document.querySelectorAll('.temp-options .option-btn').forEach(b => {
            b.classList.remove('temp-selected');
        });
        document.querySelector('.temp-options .option-btn').classList.add('temp-selected');
        
        // 重置杯型選擇
        document.querySelectorAll('.size-options .option-btn').forEach(b => {
            b.classList.remove('size-selected');
        });
        document.querySelector('.size-options .option-btn').classList.add('size-selected');
        
        // 重置數量
        document.getElementById('quantity').value = '1';
        
        // 重置備註
        document.getElementById('note').value = '';
    }

    // 刪除訂單項目
    function deleteRow(button) {
        const row = button.parentNode.parentNode;
        row.parentNode.removeChild(row);
        updateTotal();
    }

    // 更新總價
    function updateTotal() {
        const prices = Array.from(document.querySelectorAll('#orderTable tbody td:nth-child(5)'))
            .map(td => parseInt(td.textContent));
        const total = prices.reduce((sum, price) => sum + price, 0);
        document.getElementById('totalPrice').textContent = `${total} 元`;
    }

    // 匯出訂單
    function exportOrder() {
        const rows = document.querySelectorAll('#orderTable tbody tr');
        if (rows.length === 0) {
            alert('訂單是空的！請先加入飲品。');
            return;
        }

        // 建立訂單內容
        let orderText = "訂單明細\n\n";
        
        // 修改表格標題
        orderText += "     飲料名稱\t\t\t甜度\t冰塊\t數量\t價格\t備註\n";
        orderText += "-------------------------------------------------------------------------------------\n";

        // 添加訂單項目
        rows.forEach(row => {
            const cells = row.cells;
            let name = "     " + cells[0].textContent; // 在品名前加五個空格
            
            // 根據名稱長度決定要加入多少個 tab
            let nameField;
            // 特殊品項的處理
            const specialItems = [
                '波霸奶茶/粉圓奶茶',
                '波霸/粉圓紅茶拿鐵',
                '芝麻鮮奶/花生鮮奶'
            ];
            
            if (specialItems.some(item => name.includes(item))) {
                // 特殊品項使用兩個 tab
                nameField = `${name}\t\t`;
            } else {
                // 一般品項的處理
                if (name.length <= 8) {
                    nameField = `${name}\t\t\t\t`;
                } else if (name.length <= 12) {
                    nameField = `${name}\t\t\t`;
                } else if (name.length <= 16) {
                    nameField = `${name}\t\t`;
                } else if (name.length <= 20) {
                    nameField = `${name}\t`;
                } else {
                    name = name.slice(0, 19) + "…";
                    nameField = `${name}\t`;
                }
            }
            
            const note = cells[5].textContent;
            
            // 組合輸出行
            orderText += `${nameField}${cells[1].textContent}\t${cells[2].textContent}\t${cells[3].textContent}\t${cells[4].textContent}\t${note}\n`;
        });

        // 添加總計
        orderText += "-------------------------------------------------------------------------------------\n";
        orderText += `總計：${document.getElementById('totalPrice').textContent}\n\n`;

        // 添加訂單時間
        const now = new Date();
        orderText += `訂單時間：${now.toLocaleString()}\n`;
        
        // 創建並下載文字檔
        const blob = new Blob([orderText], { type: 'text/plain' });
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `訂單_${now.toLocaleString().replace(/[/:]/g, '')}.txt`;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        window.URL.revokeObjectURL(url);

        // 清除表格內容
        const tbody = document.querySelector('#orderTable tbody');
        tbody.innerHTML = '';
        
        // 更新總價
        updateTotal();
    }

    // 幫助函數：文字置中對齊
    function centerAlign(text, width) {
        text = text.trim();
        const spaces = width - text.length;
        const leftPadding = Math.floor(spaces / 2);
        const rightPadding = spaces - leftPadding;
        return ' '.repeat(leftPadding) + text + ' '.repeat(rightPadding);
    }

    // 幫助函數：文字靠右對齊
    function rightAlign(text, width) {
        text = text.trim();
        const spaces = width - text.length;
        return ' '.repeat(spaces) + text;
    }

    // 修改點擊外部關閉的處理
    window.onclick = function(event) {
        const modal = document.getElementById('orderModal');
        if (event.target == modal) {
            closeModal();
        }
    }

    // 添加清除所有訂單的函數
    function clearAllOrders() {
        if (document.querySelectorAll('#orderTable tbody tr').length === 0) {
            alert('訂單是空的！');
            return;
        }
        
        if (confirm('確定要清除所有訂單項目嗎？')) {
            const tbody = document.querySelector('#orderTable tbody');
            tbody.innerHTML = '';
            updateTotal();
        }
    }
</script>

<!-- 更新相關樣式 -->
<style>
    .option-btn {
        margin: 2px;
        padding: 5px 10px;
        border: 1px solid #ddd;
        background: white;
        border-radius: 3px;
        cursor: pointer;
        transition: opacity 0.3s;
    }
    .option-btn:disabled {
        cursor: not-allowed;
    }
    .sugar-selected, .ice-selected, .temp-selected, .size-selected {
        background: #b8925d;
        color: white;
        border-color: #b8925d;
    }
    
    /* 新增滑入動畫相關樣式 */
    #orderModal {
        transition: right 0.3s ease-in-out;
    }
    
    /* 確保內容不會超出視窗 */
    #orderModal > div {
        max-height: 100vh;
        overflow-y: auto;
    }
    
    /* 美化滾動條 */
    #orderModal > div::-webkit-scrollbar {
        width: 6px;
    }
    
    #orderModal > div::-webkit-scrollbar-track {
        background: #f1f1f1;
    }
    
    #orderModal > div::-webkit-scrollbar-thumb {
        background: #888;
        border-radius: 3px;
    }
    
    #orderModal > div::-webkit-scrollbar-thumb:hover {
        background: #555;
    }
</style>

</body>
</html>
